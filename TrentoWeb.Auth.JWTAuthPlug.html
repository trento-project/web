<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.0">
    <meta name="project" content="Trento Web v1.2.0">

    <title>TrentoWeb.Auth.JWTAuthPlug â€” Trento Web v1.2.0</title>
    <link rel="stylesheet" href="dist/html-elixir-2YOS5DIE.css" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-X7YVL3G2.js"></script>
    <script src="dist/sidebar_items-CE46C668.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-XN2TSG4M.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="readme.html">
        <img src="assets/logo.svg" alt="Trento Web" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName" translate="no">
Trento Web
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v1.2.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">GUIDES</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


        <li><a id="tasks-list-link" href="#full-list"><span translate="no">Mix</span> Tasks</a></li>

    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">TrentoWeb.Auth.JWTAuthPlug</span> 
  <small class="app-vsn" translate="no">(Trento Web v1.2.0)</small>

</h1>


  <section id="moduledoc">
<p>  The JWTAuthPlug is a Pow compatible authorization flow.
  Handles the login and the credentials recovery at each request</p><p>  Uses Joken for jwt management</p><p>  See the pow documentation for further details.
  <a href="https://hexdocs.pm/pow/Pow.Plug.Base.html">https://hexdocs.pm/pow/Pow.Plug.Base.html</a></p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#call/2" translate="no">call(conn, config)</a>

        </div>

          <div class="summary-synopsis"><p>Configures the connection for Pow, and fetches user.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create/3" translate="no">create(conn, user, config)</a>

        </div>

          <div class="summary-synopsis"><p>  Generates the refresh and access token pairs from a User
  The generated credentials will be stored in private section of the Plug.Conn struct</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete/2" translate="no">delete(conn, config)</a>

        </div>

          <div class="summary-synopsis"><p>  The authentication method is stateles, this is a no-op. Need that to satisfy Pow library</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#do_create/3" translate="no">do_create(conn, user, config)</a>

        </div>

          <div class="summary-synopsis"><p>Calls <a href="#create/3"><code class="inline">create/3</code></a> and assigns the current user.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#do_delete/2" translate="no">do_delete(conn, config)</a>

        </div>

          <div class="summary-synopsis"><p>Calls <a href="#delete/2"><code class="inline">delete/2</code></a> and removes the current user assigned to the conn.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#do_fetch/2" translate="no">do_fetch(conn, config)</a>

        </div>

          <div class="summary-synopsis"><p>Calls <a href="#fetch/2"><code class="inline">fetch/2</code></a> and assigns the current user to the conn.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#fetch/2" translate="no">fetch(conn, config)</a>

        </div>

          <div class="summary-synopsis"><p>  Read, validate and decode the JWT from authorization header at each call</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#renew/2" translate="no">renew(conn, refresh_token)</a>

        </div>

          <div class="summary-synopsis"><p>Creates new tokens using the refresh token.</p></div>

      </div>

  </div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="call/2">

  <div class="detail-header">
    <a href="#call/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">call(conn, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L11" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Configures the connection for Pow, and fetches user.</p><p>If no options have been passed to the plug, the existing configuration
will be pulled with <a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#fetch_config/1"><code class="inline">Pow.Plug.fetch_config/1</code></a></p><p><code class="inline">:plug</code> is appended to the passed configuration, so the current plug will
be used in any subsequent calls to create, update and delete user
credentials from the connection. The configuration is then set for the
conn with <a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#put_config/2"><code class="inline">Pow.Plug.put_config/2</code></a>.</p><p>If a user can't be fetched with <a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#current_user/2"><code class="inline">Pow.Plug.current_user/2</code></a>, <a href="#do_fetch/2"><code class="inline">do_fetch/2</code></a>
will be called.</p>
  </section>
</section>
<section class="detail" id="create/3">

  <div class="detail-header">
    <a href="#create/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create(conn, user, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L42" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>  Generates the refresh and access token pairs from a User
  The generated credentials will be stored in private section of the Plug.Conn struct</p>
  </section>
</section>
<section class="detail" id="delete/2">

  <div class="detail-header">
    <a href="#delete/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete(conn, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L84" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>  The authentication method is stateles, this is a no-op. Need that to satisfy Pow library</p>
  </section>
</section>
<section class="detail" id="do_create/3">

  <div class="detail-header">
    <a href="#do_create/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">do_create(conn, user, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L11" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Calls <a href="#create/3"><code class="inline">create/3</code></a> and assigns the current user.</p><p>The user is assigned to the conn with <a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#assign_current_user/3"><code class="inline">Pow.Plug.assign_current_user/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="do_delete/2">

  <div class="detail-header">
    <a href="#do_delete/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">do_delete(conn, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L11" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Calls <a href="#delete/2"><code class="inline">delete/2</code></a> and removes the current user assigned to the conn.</p><p>The user assigned is removed from the conn with
<a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#assign_current_user/3"><code class="inline">Pow.Plug.assign_current_user/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="do_fetch/2">

  <div class="detail-header">
    <a href="#do_fetch/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">do_fetch(conn, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L11" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Calls <a href="#fetch/2"><code class="inline">fetch/2</code></a> and assigns the current user to the conn.</p><p>The user is assigned to the conn with <a href="https://hexdocs.pm/pow/1.0.27/Pow.Plug.html#assign_current_user/3"><code class="inline">Pow.Plug.assign_current_user/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="fetch/2">

  <div class="detail-header">
    <a href="#fetch/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">fetch(conn, config)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L23" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>  Read, validate and decode the JWT from authorization header at each call</p>
  </section>
</section>
<section class="detail" id="renew/2">

  <div class="detail-header">
    <a href="#renew/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">renew(conn, refresh_token)</h1>

      <a href="https://github.com/trento-project/web/blob/main/lib/trento_web/auth/jwt_auth_plug.ex#L63" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> renew(<a href="https://hexdocs.pm/plug/1.13.6/Plug.Conn.html#t:t/0">Plug.Conn.t</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: {:ok, <a href="https://hexdocs.pm/plug/1.13.6/Plug.Conn.html#t:t/0">Plug.Conn.t</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()}</pre>

      </div>

<p>Creates new tokens using the refresh token.</p><p>The refresh token should be verified and valid, a new access token will be issued
with the same validity as other access tokens, for the sub of the refresh token.</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.0) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
